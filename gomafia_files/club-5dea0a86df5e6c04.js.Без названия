(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{85574:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/club",function(){return s(64901)}])},64901:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return h}});var i=s(85893),n=s(67294),l=s(46959),c=s(24119),r=s(49531),a=s(34404),u=s(22132),o=s(31469),d=s.n(o);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter((function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})))),i.forEach((function(t){m(e,t,s[t])}))}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var i,n,l=[],c=!0,r=!1;try{for(s=s.call(e);!(c=(i=s.next()).done)&&(l.push(i.value),!t||l.length!==t);c=!0);}catch(a){r=!0,n=a}finally{try{c||null==s.return||s.return()}finally{if(r)throw n}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(s);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=!0;t.default=function(){var e=(0,c.kP)(),t=(0,c.iP)(),s=(0,c.y5)(),o=s.getValue,_=s.getValueNum,m=s.getValueLocaleString,h=f((0,c.bA)("tab",o("tab")),2),p=h[0],g=h[1],x=(0,n.useState)(o("residents")),y=x[0],j=x[1],v=(0,n.useState)(o("requests")),N=v[0],k=v[1],T=(0,n.useState)(_("requestsNew")),w=T[0],P=T[1],q=(0,n.useState)(!1),S=q[0],z=q[1],R=(0,c.Z3)({method:{name:"club/getResidents",params:{id:_("club.id")}},data:{setDataFunc:j,emptyText:"\u0420\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",sort:{default:{sortType:o("defaultParamsResidents.sortType"),sortOrder:o("defaultParamsResidents.sortOrder")},selected:{sortType:o("urlParamsResidents.sortType"),sortOrder:o("urlParamsResidents.sortOrder")}}},pagination:{limit:o("defaultParamsResidents.limit"),defaultTotal:o("residentsTotal"),defaultPage:o("urlParamsResidents.page")},search:{emptyText:"\u0420\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",defaultValue:o("urlParamsResidents.search")},table:{columns:[{title:"\u0418\u0433\u0440\u043e\u043a"},{title:""},{title:"\u0422\u0443\u0440\u043d\u0438\u0440\u044b",sortType:"tournaments",className:"f-justify-end"},{title:"\u0411\u0430\u043b\u043b\u044b",sortType:"points",className:"f-justify-end"},{title:"ELO",sortType:"elo",className:"f-justify-end"}]},url:{paramsSuffix:"Residents"}}),O=R.refreshRequest,C=R.isEmptyResult,E=R.renderLoader,I=R.renderSearch,F=R.renderPagination,A=R.renderTableHead,W=R.renderEmptyResult,B=(0,c.Z3)({method:{name:"club/getRequests",params:{id:_("club.id")}},data:{setDataFunc:j,emptyText:"\u0417\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0432\u0441\u0442\u0440\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"},pagination:{limit:o("defaultParamsRequests.limit"),defaultTotal:o("requestsTotal"),defaultPage:o("urlParamsRequests.page")},url:{paramsSuffix:"Requests"}}),L=B.isEmptyResult,Q=B.renderLoader,V=B.renderPagination,Z=B.renderEmptyResult,M=function(e){return function(){z(!0),(0,r.FQ)("club/requestCancel",{requestId:e}).then((function(){D(e),z(!1)})).catch((function(){z(!1)}))}},U=function(e){var t=N.map((function(t){return e===+t.request_id?b({},t,{status:"accept"}):t}));k(t)},D=function(e){var t=N.map((function(t){return e===+t.request_id?b({},t,{status:"decline"}):t}));k(t)},X=function(e){return function(){g(e),"requests"===e&&w>0&&(0,r.FQ)("club/setRequestsViewed").then((function(e){"success"===e.result&&P(0)})).catch()}},Y=function(e){return(0,i.jsx)(u.zx,{mode:"secondary",twiceMode:"danger-secondary",size:"md",onClick:(t=+e,function(){z(!0),(0,r.FQ)("club/remove",{removeId:t}).then((function(){O(),z(!1)})).catch((function(){z(!1)}))}),isTwiceClick:!0,disabled:S,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"});var t},H=function(e){switch(e.status){case"accept":return[(0,i.jsx)(u.bZ,{mode:"success",size:"small",align:"center",className:"d-inline-block",children:"\u0418\u0433\u0440\u043e\u043a \u043f\u0440\u0438\u043d\u044f\u0442"})];case"decline":return[(0,i.jsx)(u.bZ,{mode:"secondary",size:"small",align:"center",className:"d-inline-block",children:"\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e"})];default:return function(e){return(0,i.jsxs)("div",{className:d()["club__request-buttons"],children:[(0,i.jsx)(u.zx,{mode:"success-secondary",size:"md",onClick:(t=+e.request_id,function(){z(!0),(0,r.FQ)("club/requestAccept",{requestId:t}).then((function(e){U(t),z(!1)})).catch((function(){z(!1)}))}),className:"mr-1",disabled:S,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),(0,i.jsx)(u.zx,{mode:"secondary",size:"md",onClick:M(+e.request_id),disabled:S,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]});var t}(e)}};return(0,i.jsxs)(u._z,{className:d().club,children:[(0,i.jsx)(u.xW,{size:"medium",children:(0,i.jsxs)("div",{className:d().club__info,children:[(0,i.jsxs)("div",{className:d()["club__info-left"],children:[(0,i.jsx)(u.qE,{src:o("club.avatar_link"),size:t.width>l.z?122:74}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:d()["club__info-left-title"],children:(0,i.jsx)(u.xv,{mode:2,marginTop:0,children:o("club.title")})}),(0,i.jsx)("div",{className:d()["club__info-left-description"],children:o("club.description")})]}),(0,i.jsx)("div",{className:d()["club-content__social"],children:(0,i.jsx)(u.g_,{vk:o("club.link_vk"),facebook:o("club.link_facebook"),instagram:o("club.link_instagram"),telegram:o("club.link_telegram"),twitch:o("club.link_twitch"),iconSize:t.width>l.z?34:26,gap:24})})]}),(0,i.jsxs)("div",{className:d()["club__info-right"],children:[(0,i.jsx)("a",{href:"/stats/".concat(o("club.president_id")),children:(0,i.jsx)(u.$i,{avatar:o("club.president_avatar_link"),name:o("club.president_login"),info:"\u041f\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442 \u043a\u043b\u0443\u0431\u0430",icon:(0,i.jsx)(u.gT,{size:t.width>l.z?24:16,isPaid:!!+o("club.president_is_paid"),iconType:o("club.president_icon_type"),iconName:o("club.president_icon"),className:"mt-025 ml-05"})})}),(0,i.jsxs)("div",{className:d()["club__info-right-stats"],children:[(0,i.jsxs)("div",{className:d()["club__info-right-stats-top"],children:[(0,i.jsxs)("div",{className:d()["club__info-right-stats-top-block"],children:[(0,i.jsx)("div",{className:d()["club__info-right-stats-top-block-amount"],children:m("club.rank")}),(0,i.jsx)("div",{className:d()["club__info-right-stats-top-block-title"],children:"\u043c\u0435\u0441\u0442\u043e \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435"})]}),(0,i.jsxs)("div",{className:d()["club__info-right-stats-top-block"],children:[(0,i.jsx)("div",{className:d()["club__info-right-stats-top-block-amount"],children:m("club.residents_total")}),(0,i.jsxs)("div",{className:d()["club__info-right-stats-top-block-title"],children:[(0,a.hz)(m("club.residents_total"),"\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442","\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u0430","\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u043e\u0432",!1)," \u043a\u043b\u0443\u0431\u0430"]})]})]}),(0,i.jsx)(u.zx,{mode:"primary",size:"md",link:"/club/edit",stretched:!0,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0443\u0431"})]})]})]})}),(0,i.jsxs)(u.xW,{size:"medium",children:[y&&N&&(0,i.jsx)("div",{className:d().club__tabs,children:(0,i.jsx)(u.mQ,{children:(0,i.jsxs)(u.gB,{isLikeButtons:!0,children:[(0,i.jsx)(u.n5,{onSelect:X("residents"),isSelectControl:!0,isSelected:"residents"===p,children:"\u0420\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u044b \u043a\u043b\u0443\u0431\u0430"}),(0,i.jsxs)(u.n5,{onSelect:X("requests"),isSelectControl:!0,isSelected:"requests"===p,children:["\u0417\u0430\u044f\u0432\u043a\u0438 \u0432 \u043a\u043b\u0443\u0431",w>0&&"requests"!==p?(0,i.jsx)(u.Ct,{mode:"primary-light",wide:!0,className:"ml-1",children:w}):""]})]})})}),"residents"===p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:d()["club__title-and-search"],children:[(0,i.jsx)(u.xv,{mode:4,marginBottom:12,className:d()["club-create__title"],children:"\u0420\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u044b \u043a\u043b\u0443\u0431\u0430"}),I()]}),!C&&y&&(0,i.jsxs)("div",{className:d().club__table,children:[A(y.map((function(t){return(0,i.jsx)(u.gr,{position:+t.rank,avatar:t.avatar_link,avatarType:"user",title:t.login,icon:(0,i.jsx)(u.gT,{isPaid:!!+t.is_paid,iconType:t.icon_type,iconName:t.icon,className:"mt-025 ml-05"}),description:"".concat(t.country,", ").concat(t.city),link:"/stats/".concat(t.id),columns:[+t.tournaments_played,+t.tournaments_score,(0,a.oM)(Math.round(+t.elo)),+e.id!==+t.id&&Y(+t.id)],columnsClasses:["text-right","text-right","text-right","text-right"]},t.login)}))),E(),F()]}),W()]}),"requests"===p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:d()["club__title-and-search"],children:(0,i.jsx)(u.xv,{mode:4,marginBottom:12,className:d()["club-create__title"],children:"\u0417\u0430\u044f\u0432\u043a\u0438 \u0432 \u043a\u043b\u0443\u0431"})}),!L&&N&&(0,i.jsxs)("div",{className:d().club__table,children:[(0,i.jsx)(u.fB,{columns:[{title:"\u0418\u0433\u0440\u043e\u043a"},{title:""}],children:N.map((function(e){return(0,i.jsx)(u.gr,{position:-1,isNew:"new"===e.status,avatar:e.avatar_link,avatarType:"user",title:e.login,icon:(0,i.jsx)(u.gT,{isPaid:!!+e.is_paid,iconType:e.icon_type,iconName:e.icon,className:"mt-025 ml-05"}),description:"".concat(e.country,", ").concat(e.city),link:"/stats/".concat(e.id),columns:[H(e)],columnsClasses:["text-right"]},e.login)}))}),Q(),V()]}),Z()]})]}),(e||o("comments"))&&(0,i.jsx)(u.xW,{size:"medium",children:(0,i.jsx)(u.HW,{defaultComments:o("comments"),position:"club",positionId:+o("club.id")})})]})}},31469:function(e){e.exports={club__info:"club_club__info__ICUjR","club__info-left":"club_club__info-left__10ZNY","club__info-left-title":"club_club__info-left-title__4IyYF","club__info-left-description":"club_club__info-left-description__tUaNK","club__info-right":"club_club__info-right__hOemo","club__info-right-stats":"club_club__info-right-stats__nLIPO","club__info-right-stats-top":"club_club__info-right-stats-top__RBPi9","club__info-right-stats-top-block-amount":"club_club__info-right-stats-top-block-amount__efI2o","club__info-right-stats-top-block-title":"club_club__info-right-stats-top-block-title__26p80","club__title-and-search":"club_club__title-and-search__9x8lc",club__table:"club_club__table__6cXzU",club__tabs:"club_club__tabs__5YrWl","club__request-buttons":"club_club__request-buttons__WynW_"}}},function(e){e.O(0,[774,888,179],(function(){return t=85574,e(e.s=t);var t}));var t=e.O();_N_E=t}]);